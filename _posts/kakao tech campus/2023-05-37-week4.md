---
layout: single
title: "[ì¹´í…Œìº  BE] week4 - ìë°”ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤(í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°, Exception, Stream ë“±)"
date: 2023-04-30 22:10:00 +0900
categories:
    - kakao tech campus
---

4ì£¼ì°¨ì˜ ë‚´ìš©ì€ ìë°”ì˜ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°, Lambda expression, Stream, Exception, Logging, I/O Stream, Serialization, Decorator Pattern ë“±ì„ ë°°ì› ìŠµë‹ˆë‹¤.

## ë‚´ë¶€ í´ë˜ìŠ¤(inner class)

í´ë˜ìŠ¤ ë‚´ë¶€ì— ì„ ì–¸í•œ í´ë˜ìŠ¤

### ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ í´ë˜ìŠ¤

í´ë˜ìŠ¤ ë‚´ë¶€ì— ë˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸

- `private`ì´ ì•„ë‹Œ ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ê²½ìš° ë‹¤ë¥¸ ì™¸ë¶€ í´ë˜ìŠ¤ì—ì„œ ìƒì„± ê°€ëŠ¥
- ì™¸ë¶€ í´ë˜ìŠ¤ê°€ ìƒì„±ëœ í›„ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ë‚´ë¶€ì—ì„œ `static` í‚¤ì›Œë“œ ì‚¬ìš© ë¶ˆê°€

```java
OutClass outClass = new OutClass();
OutClass.InClass inClass = outClass.new InClass();
```

### ì •ì  ë‚´ë¶€ í´ë˜ìŠ¤

í´ë˜ìŠ¤ ë‚´ë¶€ì— `static class InStaticClass{}` ë¡œ í´ë˜ìŠ¤ ì„ ì–¸

- `static`ì´ê¸° ë•Œë¬¸ì— ì™¸ë¶€ í´ë˜ìŠ¤ ìƒì„±ê³¼ ë¬´ê´€í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥
- ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì‚¬ìš© ë¶ˆê°€ëŠ¥

> ëª¨ë“  ì™¸ë¶€ í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `static` í´ë˜ìŠ¤ì´ë‹¤. ì •ì  ë‚´ë¶€ í´ë˜ìŠ¤ë„ staticì˜ ê´€ì ì—ì„œ ìƒê°í•˜ë©´ ì´í•´ê°€ ì‰½ë‹¤.

### ì§€ì—­ ë‚´ë¶€ í´ë˜ìŠ¤

ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ì •ì˜ë˜ëŠ” í´ë˜ìŠ¤

> ë©”ì„œë“œ í˜¸ì¶œ ì¢…ë£Œì™€ í•¨ê»˜ ë©”ì„œë“œì˜ ì§€ì—­ë³€ìˆ˜ì˜ ìœ íš¨ì„±ì´ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— `local inner class` ì—ì„œ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•œ ë©”ì„œë“œì˜ ì§€ì—­ë³€ìˆ˜ë“¤ì€ ìë™ìœ¼ë¡œ ìƒìˆ˜ë¡œ ë³€í•´ ì²˜ë¦¬ëœë‹¤. ë”°ë¼ì„œ ì´ëŸ° ì§€ì—­ë³€ìˆ˜ë“¤ì€ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

```java
Runnable getRunnable(int i){

    int num = 100;

    class MyRunnable implements Runnable{

        int localNum = 10;

        @Override
        public void run() {
            //num = 200;   //ì—ëŸ¬ ë‚¨. ì§€ì—­ë³€ìˆ˜ëŠ” ìƒìˆ˜ë¡œ ë°”ë€œ
            //i = 100;     //ì—ëŸ¬ ë‚¨. ë§¤ê°œ ë³€ìˆ˜ ì—­ì‹œ ì§€ì—­ë³€ìˆ˜ì²˜ëŸ¼ ìƒìˆ˜ë¡œ ë°”ë€œ
            localNum = 30;
            System.out.println("i =" + i);
            System.out.println("num = " +num);
            System.out.println("localNum = " +localNum);
        }
    }
    return new MyRunnable();
}
```

### ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤

í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ìƒëµí•˜ê³  ì£¼ë¡œ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ë‚˜ í•˜ë‚˜ì˜ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ë°˜í™˜

- ë³„ë„ì˜ í´ë˜ìŠ¤ ëª… ì—†ì´ í´ë˜ìŠ¤ ìƒì„±í•˜ì—¬ ë°”ë¡œ `return`
    
    ```java
    Runnable getRunnable(int i){
    
            int num = 100;
    
            return new Runnable(){
    
                int localNum = 10;
    
                @Override
                public void run() {
                    //num = 200;   //ì—ëŸ¬ ë‚¨. ì§€ì—­ë³€ìˆ˜ëŠ” ìƒìˆ˜ë¡œ ë°”ë€œ
                    //i = 100;     //ì—ëŸ¬ ë‚¨. ë§¤ê°œ ë³€ìˆ˜ ì—­ì‹œ ì§€ì—­ë³€ìˆ˜ì²˜ëŸ¼ ìƒìˆ˜ë¡œ ë°”ë€œ
                    localNum = 30;
                    System.out.println("i =" + i);
                    System.out.println("num = " +num);
                    System.out.println("localNum = " +localNum);
                }
            };
        }
    ```
    
- í•„ìš”í•œ overrideë¥¼ ë°”ë¡œ ìˆ˜í–‰í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    
    ```java
    Runnable runnable = new Runnable() {
            @Override
            public void run() {
                
            }
        };
    ```
    

## Functional Programming(FP)

ìë°” 8ë¶€í„° í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ë°©ì‹ì¸ **ëŒë‹¤ì‹**ì„ ì§€ì›

- í•¨ìˆ˜ì˜ êµ¬í˜„ê³¼ í˜¸ì¶œ ë§Œìœ¼ë¡œ í”„ë¡œê·¸ë˜ë°ì´ ìˆ˜í–‰ë˜ëŠ” ë°©ì‹
- ì´ë•Œ í•¨ìˆ˜ëŠ” ìˆœìˆ˜í•¨ìˆ˜
    - ë§¤ê°œë³€ìˆ˜ì™€ ë‚´ë¶€ ë³€ìˆ˜ ë§Œì„ ì‚¬ìš©
    - ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ ì™¸ë¶€ì— side effectê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ
    - í•¨ìˆ˜ì˜ ê¸°ëŠ¥ì´ ìë£Œì— ë…ë¦½ì ì„ì„ ë³´ì¥
    - ë™ì¼í•œ ìë£Œì— ëŒ€í•´ ë™ì¼í•œ ê²°ê³¼ë¥¼ ë³´ì¥
- ì…ë ¥ë°›ëŠ” ë§¤ê°œë³€ìˆ˜ ì´ì™¸ì— ë‹¤ë¥¸ ì™¸ë¶€ ìë£Œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ ì—¬ëŸ¬ ìë£Œë¥¼ ë³‘ë ¬ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.

## ëŒë‹¤ì‹(Lambda expression)

```java
int add(int x, int y){

    return x+y;
}

// ëŒë‹¤ì‹ í‘œí˜„
(int x, int y) -> {return x+y;}
// ë§¤ê°œë³€ìˆ˜ê°€ í•˜ë‚˜ì¼ ì‹œ ìë£Œí˜•ê³¼ ê´„í˜¸ ìƒëµ ê°€ëŠ¥
str -> {return str.length;}
// í•œ ë¬¸ì¥ì¼ ì‹œ returnê³¼ ì¤‘ê´„í˜¸ ìƒëµê°€ëŠ¥
str -> str.length; // return í‚¤ì›Œë“œëŠ” ìƒëµë˜ì–´ ìˆëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë¶™ì—¬ë²„ë¦¬ë©´ ì˜¤ë¥˜ ë°œ
```

## í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤

ëŒë‹¤ì‹ì„ ì„ ì–¸í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤

- `@FunctionalInterface` annotation
- ìµëª… í•¨ìˆ˜ì™€ ë§¤ê°œ ë³€ìˆ˜ë§Œìœ¼ë¡œ êµ¬í˜„ë˜ë¯€ë¡œ ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¨ í•˜ë‚˜ì˜ ë©”ì„œë“œë§Œì„ ì„ ì–¸í•´ì•¼í•¨
    - ì—¬ëŸ¬ê°œ ë©”ì„œë“œ ì„ ì–¸ ì‹œ ì—ëŸ¬
- ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸
    
    ```java
    @FunctionalInterface
    public interface StringConcat {
    	public void makeString(String s1, String s2);
    }
    ```
    
- ì‚¬ìš©
    
    ```java
    StringConcat concat2 = (s, v)->System.out.println(s + "," + v );
    concat2.makeString(s1, s2);
    ```
    
- ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ì™€ì˜ ë¹„êµ
    
    ```java
    StringConcat concat3 = new StringConcat() {
    			
    	@Override
    	public void makeString(String s1, String s2) {
    		System.out.println( s1 + "," + s2 );
    	}
    };
    		
    concat3.makeString(s1, s2);
    ```
    
- í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ë©”ì„œë“œë§Œì„ ê°€ì§€ê³  ìˆì–´ì„œ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ê¸¸ê²Œ ì ì§€ ì•Šê³  **ëŒë‹¤ì‹ìœ¼ë¡œ ì§§ê²Œ ìƒì„± ê°€ëŠ¥**í•˜ë‹¤.

## ìŠ¤íŠ¸ë¦¼(Stream)

- ë°°ì—´, ì»¬ë ‰ì…˜ì„ ëŒ€ìƒìœ¼ë¡œ ìë£Œì˜ ëŒ€ìƒê³¼ ê´€ê³„ì—†ì´ ë™ì¼í•œ ì—°ì‚°ì„ ìˆ˜í–‰
- í•œë²ˆ ìƒì„±í•˜ê³  ì‚¬ìš©í•œ ìŠ¤íŠ¸ë¦¼ì€ ì¬ì‚¬ìš© ë¶ˆê°€
    - ë‹¤ë¥¸ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤íŠ¸ë¦¼ì„ ë‹¤ì‹œ ìƒì„±í•´ì•¼ í•¨
        - ë”°ë¼ì„œ `filter`, `map`ë“± ì¤‘ê°„ ì—°ì‚°ê³¼  forEach ê°™ì€ ê°’ì— ëŒ€í•œ ì²˜ë¦¬ì¸ ìµœì¢… ì—°ì‚°ì´ í•„ìš”
- ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì€ ê¸°ì¡´ ìë£Œë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ
    - ìë£Œì— ëŒ€í•œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•˜ë©´ ìŠ¤íŠ¸ë¦¼ì´ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì€ ë³„ë„ë¡œ ìƒì„±

```java
int[] arr = {1,2,3,4,5};
		
int sumVal = Arrays.stream(arr).sum();
long count = Arrays.stream(arr).count();

System.out.println(sumVal);
System.out.println(count);
```

### ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°

ê° êµ¬í˜„ì€ ëŒë‹¤ì‹ì„ í™œìš©

- ì˜ˆ) ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ê¸¸ì´ê°€ 5ì´ìƒì¸ ìš”ì†Œë§Œ ì¶œë ¥
    
    ```java
    sList.stream().filter(s->s.length() >= 5).forEach(s->System.out.println(s));
    ```
    
- í™œìš©
    
    ```java
    public static void main(String[] args) {
    	List<String> sList = new ArrayList<String>();
    	sList.add("Tomas");
    	sList.add("Edward");
    	sList.add("Jack");
    	
    	Stream<String> stream = sList.stream();
    	stream.forEach(s->System.out.print(s + " "));
    	System.out.println();
    	
    	sList.stream().sorted().forEach(s->System.out.print(s+ " "));
    	sList.stream().map(s->s.length()).forEach(n->System.out.println(n));
    	sList.stream().filter(s->s.length() >= 5).forEach(s->System.out.println(s));
    	
    }
    ```
    
- ì¤‘ê°„ ì—°ì‚° - filter(), map(), sorted() ë“±
- ìµœì¢… ì—°ì‚° - forEach(), count(), sum(), reduce() ë“±

### reduce()

ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•œ ìµœì¢…ì—°ì‚°ìœ¼ë¡œ ì§ì ‘ êµ¬í˜„í•œ ì—°ì‚° ì ìš© ê°€ëŠ¥

```java
T reduce(T identify, BinaryOperator<T> accumulator)
```

- identifyëŠ” ì´ˆê¸°ê°’
- accumulatorì— ì›í•˜ëŠ” ì—°ì‚° ë„£ëŠ”ë‹¤.
- ëŒë‹¤ì‹ ì‚¬ìš©
    
    ```java
    public class ReduceTest {
    	public static void main(String[] args) {
    
    		String[] greetings = {"ì•ˆë…•í•˜ì„¸ìš”~~~", "hello", "Good morning", "ë°˜ê°‘ìŠµë‹ˆë‹¤^^"};
    		
    		System.out.println(Arrays.stream(greetings).reduce("", (s1, s2)-> 
    		                          {if (s1.getBytes().length >= s2.getBytes().length) 
    				                                  return s1;
    		                          else return s2;})); 
    		
    		
    	}
    }
    ```
    
- BianryOperator í´ë˜ìŠ¤ êµ¬í˜„(identify í•„ìš” x)
    
    ```java
    class CompareString implements BinaryOperator<String>{
    
    	@Override
    	public String apply(String s1, String s2) {
    		if (s1.getBytes().length >= s2.getBytes().length) return s1;
    		else return s2;
    	}
    }
    
    public class ReduceTest {
    	public static void main(String[] args) {
    		String[] greetings = {"ì•ˆë…•í•˜ì„¸ìš”~~~", "hello", "Good morning", "ë°˜ê°‘ìŠµë‹ˆë‹¤^^"};
    		
    		String str = Arrays.stream(greetings).reduce(new CompareString()).get();
    		System.out.println(str);
    		                          
    	}
    }
    ```
    

## ì˜ˆì™¸(Exception)ì™€ ì—ëŸ¬(Error)

- **í”„ë¡œê·¸ë¨ì˜ ì˜¤ë¥˜**
    - compile error : ì½”ë“œ ì‘ì„± ì¤‘ ë°œìƒí•˜ëŠ” ë¬¸ë²•ì  ì˜¤ë¥˜
    - runtime error: í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ ì¤‘ ì˜ë„ í•˜ì§€ ì•Šì€ ë™ì‘ì„ í•˜ê±°ë‚˜ í”„ë¡œê·¸ë¨ì´ ì¤‘ì§€ë˜ëŠ” ì˜¤ë¥˜
- **ì˜ˆì™¸ ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±**
    - ë¹„ì •ìƒ ì¢…ë£Œë¥¼ í”¼í•˜ì—¬ ì‹œìŠ¤í…œì´ ì›í• ì´ ì‹¤í–‰ë˜ë„ë¡ í•¨
    - ì‹¤í–‰ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš° ì˜¤ë¥˜ì˜ ê³¼ì •ì„ ì¬í˜„í•˜ëŠ” ê²ƒì€ í˜„ì‹¤ì ìœ¼ë¡œ í˜ë“¤ë‹¤
        - ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš° logë¥¼ ë‚¨ê²¨ì„œ ì¶”í›„ log ë¶„ì„
- **ì˜¤ë¥˜ì™€ ì˜ˆì™¸ í´ë˜ìŠ¤**
    
    ![error.png](/assets/images/2023-05-07/error.png)
    
    - error: ê°€ìƒ ë¨¸ì‹ ì—ì„œ ë°œìƒ, ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜
        - ìŠ¤íƒ ë©”ëª¨ë¦¬ ì˜¤ë²„í”Œë¡œìš° ë“±
    - Exception: í”„ë¡œê·¸ë¨ì—ì„œ ì œì–´ í•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜
        - íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜, ë„¤íŠ¸ì›Œí¬, db ì—°ê²°ì´ ì•ˆë˜ëŠ” ê²½ìš°
- ëª¨ë“  ì˜ˆì™¸ í´ë˜ìŠ¤ì˜ ìµœìƒìœ„ í´ë˜ìŠ¤ëŠ” **Exception í´ë˜ìŠ¤**(java.lang.Exception)
    
    ![exception2.png](/assets/images/2023-05-07/exception2.png)
    

## ì˜ˆì™¸ ì²˜ë¦¬í•˜ê¸°(try-catch)

```java
try {
	fis = new FileInputStream("a.txt");
} catch (FileNotFoundException e) {
	System.out.println(e);
	return;
}finally{
	if(fis != null){
		try {
			fis.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
```

- tryë¬¸ì„ ìˆ˜í–‰ ì‹œë„
- catchì˜ exception ë°œìƒ ì‹œ ë” ìˆ˜í–‰ í•˜ì§€ ì•Šê³  catchë¬¸ ìˆ˜í–‰
- finallyë¬¸ì€ ì„±ê³µ/ì‹¤íŒ¨ ìƒê´€ì—†ì´ í•­ìƒ ìˆ˜í–‰
    - íŒŒì¼ì„ ë‹«ê±°ë‚˜ ë„¤íŠ¸ì›ì„ ë‹«ëŠ” ë“±ì˜ ë¦¬ì†ŒìŠ¤ í•´ì œ êµ¬í˜„
    - catchë‚˜ tryì— returnë¬¸ì´ ìˆì–´ë„ ë¬´ì¡°ê±´ ìˆ˜í–‰ ë¨

### try-with-resources ë¬¸(ìë°” 7ì´ìƒ)

ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° close() í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ í•´ì œ ë˜ë„ë¡ í•¨

- í•´ë‹¹ ë¦¬ì†ŒìŠ¤ í´ë˜ìŠ¤ê°€ `AutoCloseable` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•¨
    - FileInputStreamì˜ ê²½ìš° `AutoCLoseable` ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ í•˜ê³  ìˆë‹¤.

```java
public class AutoCloseObj implements AutoCloseable{

	@Override
	public void close() throws Exception {
		System.out.println("ë¦¬ì†ŒìŠ¤ê°€ close() ë˜ì—ˆìŠµë‹ˆë‹¤");
	}
}
```

```java
AutoCloseObj obj = new AutoCloseObj();
try (obj){
	throw new Exception();
}catch(Exception e) {
	System.out.println("ì˜ˆì™¸ ë¶€ë¶„ ì…ë‹ˆë‹¤");
}
```

- `ìë°” 9` ë¶€í„° ë¦¬ì†ŒìŠ¤ëŠ” try() ì™¸ë¶€ì—ì„œ ì„ ì–¸í•˜ê³  ë³€ìˆ˜ë§Œì„ try(obj)ë¡œ ì‚¬ìš© ê°€ëŠ¥

### ì˜ˆì™¸ ì²˜ë¦¬ ë¯¸ë£¨ê¸° throws

`try-catch ë¬¸` ì™¸ì— exceptionì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•

```java
public Class loadClass(String fileName, String className) throws FileNotFoundException, ClassNotFoundException{
	FileInputStream fis = new FileInputStream(fileName); //FileNotFoundException ë°œìƒ ê°€ëŠ¥
	Class c = Class.forName(className);  //ClassNotFoundException ë°œìƒ ê°€
	return c;
}
```

- í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë¬¸ì¥ì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- throws ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ë˜ì§„ë‹¤(í­íƒ„ ëŒë¦¬ê¸°)

### ì‚¬ìš©ì ì •ì˜ ì˜ˆì™¸ í´ë˜ìŠ¤

- ê¸°ì¡´ ì˜ˆì™¸ í´ë˜ìŠ¤ì¤‘ ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì™¸ í´ë˜ìŠ¤ì—ì„œ ìƒì† ë°›ì•„ ì‚¬ìš©ì ì •ì˜ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ Exception í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì—¬ ìƒì„±

### ë¡œê·¸ ë‚¨ê¸°ê¸° - java.util.logging.Logger

- logging
    - ì‹œìŠ¤í…œ ìš´ì˜ì— ëŒ€í•œ ê¸°ë¡
    - ì˜¤ë¥˜ê°€ ë°œìƒ í–ˆì„ ë•Œ ê·¸ ì˜¤ë¥˜ì— ëŒ€í•œ ê¸°ë¡ì„ ë‚¨ê²¨ ë””ë²„ê¹…ì„ ìš©ì´í•˜ê²Œ í•œë‹¤
- java.util.logging
    - ìë°”ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ëŠ” log package
    - jre/lib/logging.properties íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ë¡œê·¸ì˜ ì¶œë ¥ë°©ì‹ ë¡œê·¸ ë ˆë²¨ì„ ë³€ê²½ í•  ìˆ˜ ìˆìŒ
    - ì œê³µí•˜ëŠ” ë¡œê·¸ ë ˆë²¨:  severe, warning, info, config, fine, finer, finest
    - Singletonìœ¼ë¡œ ë§Œë“  Logger  ì˜ˆì‹œ
    
    ```java
    public class MyLogger {
    	
    	Logger logger = Logger.getLogger("mylogger");
    	private static MyLogger instance = new MyLogger();
    	
    	public static final String errorLog = "log.txt";
    	public static final String warningLog = "warning.txt";
    	public static final String fineLog = "fine.txt";
    	
    	private FileHandler logFile = null;
    	private FileHandler warningFile = null;
    	private FileHandler fineFile = null;
    
    	private MyLogger(){
    	
    			try {
    				logFile = new FileHandler(errorLog, true);
    				warningFile = new FileHandler(warningLog, true);
    				fineFile = new FileHandler(fineLog, true);
    				
    			} catch (SecurityException e) {
    				// TODO Auto-generated catch block
    				e.printStackTrace();
    			} catch (IOException e) {
    				// TODO Auto-generated catch block
    				e.printStackTrace();
    			}
    	
    			logFile.setFormatter(new SimpleFormatter());
    			warningFile.setFormatter(new SimpleFormatter());
    			fineFile.setFormatter(new SimpleFormatter());
    			
    			logger.setLevel(Level.ALL);
    			fineFile.setLevel(Level.FINE);
    			warningFile.setLevel(Level.WARNING);
    			
    			logger.addHandler(logFile);
    			logger.addHandler(warningFile);
    			logger.addHandler(fineFile);
    	}	
    	
    	
    	public static MyLogger getLogger(){
    		return instance;
    	}
    
    	
    	public void log(String msg){
    		
    		logger.finest(msg);
    		logger.finer(msg);
    		logger.fine(msg);
    		logger.config(msg);
    		logger.info(msg);
    		logger.warning(msg);
    		logger.severe(msg);
    		
    	}
    	
    	public void fine(String msg){
    		logger.fine(msg);
    	}
    	
    	public void warning(String msg){
    		logger.warning(msg);
    	}
    }
    ```
    
    - ë¡œê·¸ë¥¼ ë‚¨ê¸°ê³  ì‹¶ì€ ë¶€ë¶„ì„ fine, warning ë“±ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ë‚¨ê¸´ë‹¤.
    - exception handling ë¶€ë¶„ì—ì„œ warningì„ ì‚¬ìš©í•´ exception ë©”ì‹œì§€ë¥¼ ë‚¨ê¸´ë‹¤.
    - **ë‚ ì§œ, ì‹œê°„, ë°œìƒí•œ í´ë˜ìŠ¤ì™€ ë©”ì„œë“œ, íƒ€ì…ê³¼ ë©”ì‹œì§€**ê°€ íŒŒì¼ë¡œ ì €ì¥ëœë‹¤.

## I/O Stream

ìë°”ëŠ” ë‹¤ì–‘í•œ ì…ì¶œë ¥ ì¥ì¹˜ì— ë…ë¦½ì ìœ¼ë¡œ ì¼ê´€ì„±ìˆëŠ” ì…ì¶œë ¥ì„ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì„ í†µí•´ ì œê³µ

**ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì˜ êµ¬ë¶„**

- **ì¼ë°˜ì **ì¸ ê²½ìš°
    
    ![iostream.png](/assets/images/2023-05-07/iostream.png)
    
    - ì…ë ¥ ìŠ¤íŠ¸ë¦¼
        - `FileInputStream`, `FileReader`, `BufferedInputStream`, `BufferedReader` ë“±
    - ì¶œë ¥ ìŠ¤íŠ¸ë¦¼
        - `FileOutputStream`, `FileWriter`, `BufferedOutputStream`, `BufferedWriter` ë“±
- **ìë£Œì˜ ì¢…ë¥˜**ì— ë”°ë¼
    
    ![byte.png](/assets/images/2023-05-07/byte.png)
    
    - ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼
        - `FileInputStream`, `FileOutputStream`, `BufferedInputStream`, `BufferedOutputStream` ë“±
    - ë¬¸ì ìŠ¤íŠ¸ë¦¼
        - ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì²˜ë¦¬ ì‹œ ë¬¸ì ê¹¨ì§ˆ ê°€ëŠ¥ì„±, ì¸ì½”ë”©ì— ë§ê²Œ (2ë°”ì´íŠ¸ ì´ìƒìœ¼ë¡œ) ì²˜ë¦¬
        - `FileReader`, `FileWriter`, `BufferedReader`, `BufferedWriter` ë“±
        - **Reader**, **Writer**ê°€ ë¶™ëŠ”ë‹¤.
- **ê¸°ëŠ¥**ì— ë”°ë¼
    
    ![second.png](/assets/images/2023-05-07/second.png)
    
    - ê¸°ë°˜ ìŠ¤íŠ¸ë¦¼
        - ëŒ€ìƒì— ì§ì ‘ ìë£Œë¥¼ ì½ê³  ì“°ëŠ” ìŠ¤íŠ¸ë¦¼
        - `FileInputStream`, `FileOutputStream`, `FileReader`, `FileWriter` ë“±
    - ë³´ì¡° ìŠ¤íŠ¸ë¦¼
        - ì§ì ‘ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥ ì—†ì´ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ë”í•´ì¤Œ
        - `InputStreamReader`, `OutputStreamWriter`, `BufferedInputStream`, `BufferedOutputStream`

## í‘œì¤€ I/O stream

í‘œì¤€ ì… ì¶œë ¥(í‚¤ë³´ë“œ, ëª¨ë‹ˆí„°-ì½˜ì†” ì°½)ë¥¼ ë‹¤ë£¨ëŠ” ìŠ¤íŠ¸ë¦¼

```java
public class System{ 
	public static PrintStream out; 
	public static InputStream in; 
	public static PrintStream err; 
}
```

- System.out(í‘œì¤€ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼)
    - System.out.println("ì¶œë ¥ ë©”ì„¸ì§€");
- System.in(í‘œì¤€ ì… ìŠ¤íŠ¸ë¦¼)
    - int d = System.in.read(); // í•œ ë°”ì´íŠ¸ ì½ê¸°
- System.err(í‘œì¤€ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼)
    - System.err.println("ì—ëŸ¬ ë©”ì„¸ì§€");

## ë°”ì´íŠ¸ ë‹¨ìœ„ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼

### InputStream

- ë°”ì´íŠ¸ ë‹¨ìœ„ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ ìµœìƒìœ„ ì¶”ìƒ í´ë˜ìŠ¤
- ì£¼ìš” í•˜ìœ„ í´ë˜ìŠ¤
    
    
    | FileInputStream | íŒŒì¼ì—ì„œ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì½ê¸° |
    | --- | --- |
    | ByteArrayInputStream | byte ë°°ì—´ ë©”ëª¨ë¦¬ì—ì„œ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì½ê¸° |
    | FilterInputStream | ë³´ì¡° ìŠ¤íŠ¸ë¦¼ì˜ ìƒìœ„ í´ë˜ìŠ¤ |
- ì£¼ìš” ë©”ì„œë“œ
    
    
    | int read() | í•œ ë°”ì´íŠ¸ì˜ ìë£Œë¥¼ ì½ê¸° |
    | --- | --- |
    | int read(byte b[]) | b[] í¬ê¸°ì˜ ìë£Œë¥¼ b[]ì— ì €ì¥ |
    | int read(byte b[], int off, int len) | b[] í¬ê¸°ì˜ ìë£Œë¥¼ len ë§Œí¼ b[]ì˜ offë³€ìˆ˜ ìœ„ì¹˜ë¶€í„° ì €ì¥ |
    | void close() | ì…ë ¥ ìŠ¤íŠ¸ë¦¼ê³¼ ì—°ê²°ëœ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹«ìŒ |
    - read()ì—ì„œ ë” ì´ìƒ ì½ì„ ê²Œ ì—†ì„ ë•Œ -1ì„ return
    - read()ì˜ ë¦¬í„´ ê°’ì˜ íƒ€ì…ì€ intí˜•
    - íƒ€ì… ë³€í™˜ì´ í•„ìš”

### OutputStream

- ë°”ì´íŠ¸ ë‹¨ìœ„ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ ìµœìƒìœ„ ì¶”ìƒ í´ë˜ìŠ¤
- ì£¼ìš” í•˜ìœ„ í´ë˜ìŠ¤
    
    
    | FileOutputStream | íŒŒì¼ì—ì„œ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì¶œë ¥ |
    | --- | --- |
    | ByteArrayOutputStream | byte ë°°ì—´ ë©”ëª¨ë¦¬ì—ì„œ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì¶œë ¥ |
    | FilterOutputStream | ë³´ì¡° ìŠ¤íŠ¸ë¦¼ì˜ ìƒìœ„ í´ë˜ìŠ¤ |
- ì£¼ìš” ë©”ì„œë“œ
    
    
    | int write() | í•œ ë°”ì´íŠ¸ì˜ ìë£Œë¥¼ ì¶œë ¥ |
    | --- | --- |
    | int write(byte b[]) | b[] í¬ê¸°ì˜ ìë£Œë¥¼ ì¶œë ¥ |
    | int write(byte b[], int off, int len) | b[] í¬ê¸°ì˜ ìë£Œë¥¼ len ë§Œí¼ b[]ì˜ offë³€ìˆ˜ ìœ„ì¹˜ë¶€í„° ì¶œë ¥ |
    | void flush() | ì¶œë ¥ ë²„í¼ë¥¼ ê°•ì œë¡œ ë¹„ì›Œ ìë£Œë¥¼ ì¶œë ¥ |
    | void close() | ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ê³¼ ì—°ê²°ëœ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹«ìŒ(ì¶œë ¥ ë²„í¼ ë¦¬ì…‹) |
    - `close()` ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ `flush()`ê°€ í˜¸ì¶œë˜ë¯€ë¡œ ìë™ìœ¼ë¡œ ì¶œë ¥ ë²„í¼ê°€ ë¹„ì›Œì§„ë‹¤.

## ë¬¸ì ë‹¨ìœ„ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼

### Reader

- ë¬¸ì ë‹¨ìœ„ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ ìµœìƒìœ„ ì¶”ìƒ í´ë˜ìŠ¤
- ì£¼ìš” í•˜ìœ„ í´ë˜ìŠ¤
    
    
    | FileReader | íŒŒì¼ì—ì„œ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì…ë ¥ |
    | --- | --- |
    | InputStreamReader | byte ë‹¨ìœ„ë¡œ ì½ì€ ìë£Œë¥¼ ë¬¸ìë¡œ ë³€í™˜í•´ì£¼ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼ |
    | BufferedReader | ë°°ì—´ì„ ì œê³µí•˜ì—¬ í•œêº¼ë²ˆì— ì½ì„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼ |

### Writer

- ë¬¸ì ë‹¨ìœ„ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ ìµœìƒìœ„ ì¶”ìƒ í´ë˜ìŠ¤
- ì£¼ìš” í•˜ìœ„ í´ë˜ìŠ¤
    
    
    | FileWriter | íŒŒì¼ì—ì„œ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì¶œë ¥ |
    | --- | --- |
    | OutputStreamWriter | byte ë‹¨ìœ„ì˜ ìë£Œë¥¼ ë¬¸ìë¡œ ë³€í™˜í•´ì£¼ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼ |
    | BufferedWriter | ë°°ì—´ì„ ì œê³µí•˜ì—¬ í•œêº¼ë²ˆì— ì“¸ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼ |

## ë³´ì¡° ìŠ¤íŠ¸ë¦¼

ì‹¤ì œ ì½ê³  ì“°ëŠ” ìŠ¤íŠ¸ë¦¼ì´ ì•„ë‹Œ ë³´ì¡° ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ìŠ¤íŠ¸ë¦¼

- `Decorator Pattern`ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤
    - ìƒì„±ìì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë˜ ë‹¤ë¥¸ ìŠ¤íŠ¸ë¦¼ì„ ê°€ì§„ë‹¤.
- **InputStreamReader / OutputStreamWriter**
    - ë°”ì´íŠ¸ ë‹¨ìœ„ë¥¼ ë¬¸ìë¡œ ë³€í™˜í•´ì£¼ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼
    
    ```java
    try(InputStreamReader isr = new InputStreamReader(new FileInputStream("reader.txt"))){
    	int i;
    	while( (i = isr.read()) != -1){  //ë³´ì¡° ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì½ìŠµë‹ˆë‹¤.
    		System.out.print((char)i);
    	}
    }catch(IOException e) {
    	e.printStackTrace();
    }
    ```
    
- **BufferedInputStream / BufferedOutputStream**
    - ì•½ 8kì˜ ë°°ì—´ì´ ì œê³µë˜ì–´ ì…ì¶œë ¥ì´ ë¹ ë¥´ê²Œ í•˜ëŠ” ê¸°ëŠ¥ì´ ì œê³µë˜ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼
    
    ```java
    try(FileInputStream fis = new FileInputStream("a.zip");
    		FileOutputStream fos = new FileOutputStream("copy.zip");
    		BufferedInputStream bis = new BufferedInputStream(fis);
    		BufferedOutputStream bos = new BufferedOutputStream(fos)){
    
    	millisecond = System.currentTimeMillis();
    	
    	int i;
    	while( ( i = bis.read()) != -1){
    		bos.write(i);
    	}
    	
    	millisecond = System.currentTimeMillis() - millisecond;
    }catch(IOException e) {
    	e.printStackTrace();
    }
    System.out.println("íŒŒì¼ ë³µì‚¬ í•˜ëŠ” ë° " + millisecond + " milliseconds ì†Œìš”ë˜ì—ˆìŠµë‹ˆë‹¤.");
    ```
    

## ê·¸ ì™¸ ì¶”ê°€ì ì¸ ì…ì¶œë ¥ ê´€ë ¨ í´ë˜ìŠ¤

- **RandomAccessFile í´ë˜ìŠ¤**
    - ìŠ¤íŠ¸ë¦¼ì´ ì•„ë‹˜
    - ìœ ì¼í•˜ê²Œ ì…ë ¥ê³¼ ì¶œë ¥ì„ ë™ì‹œì— í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤
    - íŒŒì¼ í¬ì¸í„°ê°€ ì¡´ì¬í•˜ì—¬ ì½ê³  ì“°ëŠ” ìœ„ì¹˜ì˜ ì´ë™ì´ ê°€ëŠ¥í•˜ë‹¤.
- **File í´ë˜ìŠ¤**
    - ì…ì¶œë ¥ ê¸°ëŠ¥ x
    - íŒŒì¼ì˜ ì´ë¦„, ê²½ë¡œ, ì½ê¸° ì „ìš© ë“±ì˜ ì†ì„± ì €ì¥í•˜ëŠ” íŒŒì¼ì˜ ê°ì²´

## Serialization - ì§ë ¬í™”

ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ ë‚´ë³´ë‚´ê³ (**serialization**) ì´ë¥¼ ë‹¤ì‹œ ë³µì›(**deserialization**) í•˜ëŠ” ë°©ì‹

- í´ë˜ìŠ¤ë¥¼ `Serializable`ì„ `implements`í•˜ì—¬ ì§ë ¬í™” ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- **ObjectInputStream / ObjectOutputStream**(ë³´ì¡° ìŠ¤íŠ¸ë¦¼)ì„ í†µí•´ ì…ì¶œë ¥ì´ ê°€ëŠ¥í•˜ë‹¤.

> ì§ë ¬í™”ëŠ” **ì¸ìŠ¤í„´ìŠ¤ì˜ ë‚´ìš©ì´ ì™¸ë¶€ë¡œ ìœ ì¶œë˜ëŠ” ê²ƒ**ì´ë¯€ë¡œ ì§ë ¬í™”ì˜ ì˜ë„ë¥¼ í‘œì‹œí•´ì•¼ í•œë‹¤
> 

- **Serializable ì¸í„°í˜ì´ìŠ¤**
    - ë³„ê°œì˜ êµ¬í˜„ ì½”ë“œ ì—†ì´ `implements` ë§Œ í•˜ë©´ ëœë‹¤.
    
    ```java
    class AnyObjects implements Serializable{
    	...
    }
    ```
    
    - Socket ê°™ì´ ì§ë ¬í™”ê°€ ë¶ˆê°€ëŠ¥í•œ ê°ì²´, í˜¹ì€ ì§ë ¬í™”í•˜ì§€ ì•Šìœ¼ë ¤ëŠ” ë©¤ë²„ ë³€ìˆ˜ì—ëŠ” `transient` í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•œë‹¤. (ë³µì›í•  ë•Œ default ê°’ìœ¼ë¡œ ë³µì›ëœë‹¤)
- **Externalizable ì¸í„°í˜ì´ìŠ¤**
    - ì§ì ‘ ê°ì²´ë¥¼ ì½ê³  ì“°ëŠ” ì½”ë“œë¥¼ êµ¬í˜„
    
    ```java
    class AnyObjects implements Externalizable{
    	
    	String name;
    	...
    
    	@Override
    	public void writeExternal(ObjectOutput obj) throws IOException {
    		obj.writeUTF(name);
    	}
    
    	@Override
    	public void readExternal(ObjectInput obj) throws IOException, ClassNotFoundException {
    		name = obj.readUTF();
    	}
    }
    ```
    

## Decorator Pattern

decoratorê°€ ê°ì‹¸ê³  ìˆëŠ” component ê¸°ëŠ¥ì„ ì „ë¶€ ê·¸ëŒ€ë¡œ ì œê³µí•˜ëŠ”ë°, decorator ìì‹ ì˜ ê¸°ëŠ¥ì„ ë” ì¶”ê°€í•˜ì—¬ ì œê³µí•œë‹¤.

> ìë°”ì˜ **ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼**ì€ ì „ë¶€ **decorator pattern**ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤!
> 

![decorator.png](/assets/images/2023-05-07/decorator.png)

- ìƒì†ë³´ë‹¤ ìœ ì—°í•œ êµ¬í˜„ ë°©ì‹
- ì§€ì†ì ì¸ ê¸°ëŠ¥ì˜ ì¶”ê°€ì™€ ì œê±°ê°€ ìš©ì´
- ë°ì½”ë ˆì´í„°ëŠ” ë‹¤ë¥¸ ë°ì½”ë ˆì´í„°ë‚˜ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨í•´ì•¼ í•¨
    - ê¸°ëŠ¥ì´ ì‹¤í–‰ë  ë•Œ ë¨¼ì € ê°ì‹¸ê³  ìˆëŠ” componentë‚˜ ë‹¤ë¥¸ decoratorë¥¼ ë¨¼ì € ì‹¤í–‰
    - ê·¸ í›„, ìì‹ ì˜ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ë” ì‹¤í–‰í•œë‹¤.

---
## âœï¸ì—¬ë‹´
ìë°” ê¸°ì–µì´ ìƒˆë¡ìƒˆë¡ ë‚˜ë©´ì„œ ë¬¸ë²•ì— ì™„ì „ ì¹œìˆ™í•´ì¡Œì–´ìš”. ì˜›ë‚ ì— í–ˆë‹¤ê³  ë‹¤ ê¹Œë¨¹ì—ˆë‚˜ í–ˆë”ë‹ˆ ê¸ˆë°© ë‹¤ ìƒê°ë‚˜ë„¤ìš”. ë¹¨ë¦¬ ìŠ¤í”„ë§ë„ ë°°ìš°ê³  ì‹¶ì–´ìš”!ğŸš—

